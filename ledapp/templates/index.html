<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>LifeBox - LED y DHT11</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <script>
        let socket = new WebSocket("ws://" + window.location.host + "/ws/dht/");

        socket.onmessage = function(event) {
            let data = JSON.parse(event.data);
            if (data.temperature !== undefined) {
                document.getElementById('temp').textContent = data.temperature + " Â°C";
            }
            if (data.humidity !== undefined) {
                document.getElementById('hum').textContent = data.humidity + " %";
            }
            if (data.led !== undefined) {
                document.getElementById('led-status').textContent = data.led ? "ENCENDIDO" : "APAGADO";
                document.getElementById('led-status').className = data.led ? "badge bg-success" : "badge bg-secondary";
            }
        };

        function sendCommand(cmd) {
            socket.send(JSON.stringify({ command: cmd }));
        }
    </script>
</head>
<body class="bg-light text-center py-4">

    <div class="container">
        <h1 class="mb-4">LifeBox - Monitoreo en tiempo real</h1>

        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <h5 class="card-title">Estado del LED</h5>
                <p class="card-text">
                    <span id="led-status" class="badge bg-secondary">Cargando...</span>
                </p>
                <div class="btn-group" role="group">
                    <button class="btn btn-success" onclick="sendCommand('on')">Encender</button>
                    <button class="btn btn-danger" onclick="sendCommand('off')">Apagar</button>
                    <button class="btn btn-warning" onclick="sendCommand('toggle')">Alternar</button>
                </div>
            </div>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Sensor DHT11</h5>
                <p class="card-text">Temperatura: <strong id="temp">Cargando...</strong></p>
                <p class="card-text">Humedad: <strong id="hum">Cargando...</strong></p>
            </div>
        </div>
    </div>

    <footer class="mt-5 text-muted">
        <small>&copy; 2025 LifeBox | Raspberry Pi 4B</small>
    </footer>

</body>
</html>
